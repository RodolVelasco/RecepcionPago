{% extends "BenDoctorsBundle::layout.html.twig" %}
{% block title %}
Tableau de bord | {{ parent() }}
{% endblock %}
{% block body %}
<div class="btn-group pull-right" style="margin-top: 15px;">              
  <button class="btn btn-primary "><span class="glyphicon glyphicon-cog"></span> Seleccione una acción</button>
  <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li><a href="{{ path('person_edit', { 'id': entity.id }) }}"><span class="glyphicon glyphicon-edit"></span> modificar</a></li>
    <li><a href="{{ path('antecedent_new', { 'id': entity.id }) }}"><span class="glyphicon glyphicon-plus"></span> Antecedente</a></li>
    <li><a href="{{ path('consultation_new', { 'id': entity.id }) }}"><span class="glyphicon glyphicon-plus"></span> Consulta general</a></li>
    <li><a href="{{ path('consultation_new', { 'id': entity.id, 'type': 1 }) }}"><span class="glyphicon glyphicon-plus"></span> Consulta especializada</a></li>
    <li><a id="btnPrint"><span class="glyphicon glyphicon-print"></span> imprimir</a></li>
    <li><a href="#" id="js-delete"><span class="glyphicon glyphicon-trash"></span> Borrar</a></li>
  </ul>
</div>
<h3><span class="glyphicon glyphicon-user"></span> {{ entity.fullName }}</h3>

<div class="row">
<div class="col-md-4">
    <div class="box">
      <header>
          <h4><span class="glyphicon glyphicon-file"></span> Identificación del estudiante</h4>
      </header>
        <ul class="list-group">
          <li class="list-group-item"><strong>Apellido :</strong> {{ entity.familyname }}</li>
          <li class="list-group-item"><strong>Nombre :</strong>  {{ entity.firstname }} </li>
          <li class="list-group-item"><strong>NIT :</strong> {{ entity.cin }}</li>
          <li class="list-group-item"><strong>DUI :</strong> {{ entity.cne }}</li>
          <li class="list-group-item"><strong>Sexo :</strong> {{ entity.gender }}</li>
          <li class="list-group-item"><strong>Fecha de nacimiento :</strong> {% if entity.birthday %}{{ entity.birthday|date('d/m/Y') }}{% endif %}</li>
          <li class="list-group-item"><strong>Lugar de nacimiento :</strong> {{ entity.birthcity }}</li>
          <li class="list-group-item"><strong>Residente :</strong> {{ entity.resident ? 'Oui' : 'Non' }}</li>
        </ul>
    </div>
</div>
<div class="col-md-4">
    <div class="box">
      <header>
          <h4><span class="glyphicon glyphicon-pushpin"></span> Información general</h4>
      </header>
      <ul class="list-group">
          <li class="list-group-item"><strong>Establecimiento :</strong> {{ entity.etablissement }}</li>
          <li class="list-group-item"><strong>Universidad :</strong> {{ entity.university }}</li>
          <li class="list-group-item"><strong>Dirección :</strong> {{ entity.address }}</li>
          <li class="list-group-item"><strong>Departamento :</strong> {{ entity.city }}</li>
          <li class="list-group-item"><strong>Pagar :</strong> {{ entity.contry }}</li>
          <li class="list-group-item"><strong>Teléfono :</strong> {{ entity.gsm }}</li>
          <li class="list-group-item"><strong>Dirección email :</strong> <a href="mailto:{{ entity.email }}">{{ entity.email }}</a></li>
          <li class="list-group-item"><strong>Tipo de cobertura social :</strong> {{ entity.cnsstype }}</li>
          <li class="list-group-item"><strong>N° de cobertura social :</strong> {{ entity.cnss }}</li>
      </ul>
    </div>
</div>
<div class="col-md-4">
    <div class="box">
      <header>
          <h4><span class="glyphicon glyphicon-user"></span> Tutor</h4>
      </header>
      <ul class="list-group">
          <li class="list-group-item"><strong>Nombre :</strong> {{ entity.parentName }}</li>
          <li class="list-group-item"><strong>Dirección :</strong> {{ entity.parentAddress }}</li>
          <li class="list-group-item"><strong>Gsm :</strong> {{ entity.parentGsm }}</li>
          <li class="list-group-item"><strong>Fijo :</strong> {{ entity.parentFixe }}</li>
      </ul>
    </div>
    {% if entity.ishandicap %}
    <div class="box">
      <header>
          <h4><span class="glyphicon glyphicon-tag"></span> Handicap</h4>
      </header>
      <ul class="list-group">
          <li class="list-group-item"><strong>Naturaleza de la discapacidad :</strong> {{ entity.handicap }}</li>
          <li class="list-group-item"><strong>Necesidades específicas :</strong> {{ entity.needs|nl2br }}</li>
      </ul>
    </div>
    {% endif %}
</div>
<div class="col-md-12">
      <div class="box">
        <header>
            <h4><span class="glyphicon glyphicon-tag"></span> Antecedentes</h4>
        </header>
        <table class="table table-hover table-bordered">
            <thead>
                <tr>
                    <th>tipo</th>
                    <th>alergias</th>
                    <th>otro</th>
                    <th>tratamiento</th>
                    <th>quirúrgico</th>
                </tr>
            </thead>
            <tbody>
            {% for item in entity.antecedents %}
              <tr>
                <td><a href="{{ path('antecedent_edit', { 'id': item.id }) }}">{{ item.type }}</a></td>
                <td>{{ item.allergies|nl2br }}</td>
                <td>{{ item.autres|nl2br }}</td>
                <td>{{ item.traitement|nl2br }}</td>
                <td>{{ item.chirurgicaux|nl2br }}</td>
              </tr>
            {% endfor %}
            </tbody>
        </table>
    </div> 
</div>

<div class="col-md-12">
      <div class="box">
        <header>
            <h4><span class="glyphicon glyphicon-tag"></span> Consultations</h4>
        </header>
        <table class="table table-hover table-bordered">
            <thead>
                <tr>
                    <th>Terreno</th>
                    <th>Fecha</th>
                    <th>Médico</th>
                    <th>Tipo</th>
                    <th>Diagnóstico</th>
                    <th>Tratamiento</th>
                </tr>
            </thead>
            <tbody>
            {% for item in entity.consultations %}
              <tr>
                <td><a href="{{ path('consultation_show', { 'id': item.id }) }}">{{ item.name }}</a></td>
                <td>{{ item.created|date('d/m/Y') }}</td>
                <td><a href="{{ path('ben_show_user', { 'id': item.user.id }) }}">{{ item.user.fullname }}</a></td>
                <td>{{ item.type }}</td>
                <td>{{ item.diagnosis|truncate(50) }}</td>
                <td>{{ item.treatment|truncate(50) }}</td>
              </tr>
            {% endfor %}
            </tbody>
        </table>
    </div> 
</div>
</div>
<form id="deleteForm" action="{{ path('person_delete', { 'id': entity.id }) }}" method="POST">
    {{ form_widget(delete_form) }}
</form> 
{% endblock %}
{% block javascripts %}
{{ parent() }}
<script> 
    (function($) {

        $('#js-delete').on('click', function(){
            $('#deleteForm').submit();
            return false;
        });
    })(jQuery);
</script>
{% endblock %}
